language: python
python:
  - "3.5.0"
  - "3.5"
  - "3.6"
  - "3.7-dev"
matrix:
  include:
    - python: "3.5"
      install:
        - pip install --upgrade pip wheel
        - pip install --upgrade -r tests_requirements.txt
        - pip install aiohttp==2.0
    - python: "3.6"
      install:
        - pip install --upgrade pip wheel
        - pip install --upgrade -r tests_requirements.txt
        - pip install aiohttp==2.0
  allow_failures:
    - python: "3.7-dev"
  fast_finish: true
install:
  - pip install --upgrade pip wheel
  - pip install --upgrade -r tests_requirements.txt
script:
  - flake8
  - env FORCE_IPV4=1 py.test tests --cov=peony
cache: pip
after_success:
  - codecov
